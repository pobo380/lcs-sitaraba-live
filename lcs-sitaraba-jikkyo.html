<head>
  <title>LCSしたらば実況</title>
</head>

<body>
  {{> content }}
</body>

<template name="content">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span12">
            <h1><a class="brand" href="/">LCS したらば実況</a></h1>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="main">
    <div id="comments_container">
      <h2>Comments</h2>
      <div id="comments">
        {{#if is_live }}
          {{> live_comments }}
        {{else}}
          {{> archive_comments }}
        {{/if}}
      </div>
    </div>
    <div id="video_container">
      <div class="_wrap">
        <h2>TwitchTV</h2>
        <div id="player_container">
          {{#if is_live }}
            {{> live_video }}
          {{else}}
            {{> archive_video }}
          {{/if}}
        </div>
        {{> time  }} 
      </div>
    </div>
  </div>
  {{> twitch_api }}
</template>

<template name="live_comments">
  {{#each comments }}
    <div id="{{thread_id}}_{{res_idx}}" class="comment">
      <span class="res_idx">{{res_idx}}</span>
      <span class="date">{{date}}</span>
      <pre class="text">{{text}}</pre>
    </div>
  {{/each}}
</template>

<template name="archive_comments">
  {{#each comments }}
    <div id="{{thread_id}}_{{res_idx}}" class="comment">
      <span class="res_idx">{{res_idx}}</span>
      <span class="date">{{date}}</span>
      <pre class="text">{{text}}</pre>
    </div>
  {{/each}}
</template>

<template name="live_video">
  <object data="http://www-cdn.jtvnw.net/swflibs/TwitchPlayer.swf" height="738px" id="live_site_player_flash" name="live_site_player_flash" type="application/x-shockwave-flash" width="100%">
    <param name="allowFullScreen" value="true">
    <param name="wmode" value="opaque">
    <param name="allowScriptAccess" value="always">
    <param name="allowNetworking" value="all">
    <param name="flashvars" value="channel=riotgames&amp;hostname=www.twitch.tv&amp;auto_play=true">
  </object>
</template>

<template name="archive_video">
  <object name="archive_site_player_flash" data='http://www-cdn.jtvnw.net/widgets/archive_site_player.swf' height='738px' id='archive_site_player_flash' type='application/x-shockwave-flash' width='100%'>
    <param name='allowScriptAccess' value='always' />
    <param name='allowNetworking' value='all' />
    <param name='allowFullScreen' value='true' />
    <param name='flashvars' value='auto_play=true&amp;channel=riotgames&amp;archive_id={{archive_id}}&amp;enable_javascript=true&amp;videoId=a{{archive_id}}&amp;hostname=www.twitch.tv' />
  </object>
</template>

<template name="time">
  <div>
    <h4>{{ current }}</h4>
  </div>
</template>

<template name="twitch_api">
  <div id="twitch_api">
  </div>
</template>
